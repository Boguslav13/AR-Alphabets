<html>

<meta aframe-injected="" name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui">
<meta aframe-injected="" name="mobile-web-app-capable" content="yes">
<meta description="The letters and pictures of the alphabet are learned through Augmented Reality.">

<head>
	<title>
		EduAR
	</title>
	<link rel="manifest" href="manifest.json">

	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
</head>

<body>
	<!-- <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.5.0/aframe/build/aframe-ar.js" crossorigin="anonymous"></script> -->
	<script src="https://prashant-andani.github.io/AR.js/aframe/build/aframe-ar.js">


	</script>

	<div class="AR-tip">
		<p>This is an AR Education app for children
			<a style="white-space: nowrap" class="links" target="_blank" href="https://www.google.ru/search?q=hiro+marker&newwindow=1&source=lnms&tbm=isch&sa=X&ved=0ahUKEwiV97CF6LnXAhUHpqQKHSfEBSAQ_AUICigB&biw=1676&bih=855&dpr=2">Hiro-marker</a>
		</p>
		<a class="gotit" href="#">Got it!</a>
	</div>
	<div class="word-tip">
		<div class="title"></div>
	</div>
	
	<div class="btns-wrap">
		<div class="btn rotate"></div>
		<div class="btn scale"></div>
		<div class="btn prev custom-button"></div>
		<div class="btn next custom-button"></div>
	</div>
</div>

		<a-scene embedded arjs='trackingMethod: best; sourceType: webcam; debugUIEnabled: false;'>
			<a-assets>
				<a-asset-item id="deer_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/deer/scene.gltf"></a-asset-item>

				<!--<a-asset-item id="xmas_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/christmas_tree/scene.gltf"></a-asset-item>-->
				<a-asset-item id="flower_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/flower/scene.gltf"></a-asset-item>
				<a-asset-item id="car_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/oldcar/scene.gltf"></a-asset-item>
				<a-asset-item id="tree_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/tree/scene.gltf"></a-asset-item>
				<a-asset-item id="gun_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/gun/scene.gltf"></a-asset-item>
				<a-asset-item id="hen_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/hen/scene.gltf"></a-asset-item>
				<a-asset-item id="dog_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/dog/scene.gltf"></a-asset-item>
				<a-asset-item id="van_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/van/scene.gltf"></a-asset-item>
				<a-asset-item id="lion_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/lion/scene.gltf"></a-asset-item>
				<a-asset-item id="whale_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/whale/scene.gltf"></a-asset-item>
				<a-asset-item id="iphone_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/iphone/scene.gltf"></a-asset-item>
				<a-asset-item id="pencil_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/pencil/scene.gltf"></a-asset-item>
				<a-asset-item id="axe_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/axe/scene.gltf"></a-asset-item>
				<a-asset-item id="cow_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/cow/scene.gltf"></a-asset-item>
				<a-asset-item id="knife_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/knife/scene.gltf"></a-asset-item>
				<a-asset-item id="owl_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/owl/scene.gltf"></a-asset-item>
				<a-asset-item id="boat_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/boat/scene.gltf"></a-asset-item>
				<a-asset-item id="rat_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/rat/scene.gltf"></a-asset-item>
				<a-asset-item id="earth_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/earth/scene.gltf"></a-asset-item>
				<a-asset-item id="scissor_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/scissor/scene.gltf"></a-asset-item>
				<a-asset-item id="jaguar_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/jaguar/scene.gltf"></a-asset-item>
				<!-- Object -->
				<a-asset-item id="aeroplane_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/Aeroplane/Airplane.obj"></a-asset-item>
				<a-asset-item id="aeroplane_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/Aeroplane/Airplane.mtl"></a-asset-item>
			
				<a-asset-item id="zebra_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/zebra_obj/Zebra.obj"></a-asset-item>
				<a-asset-item id="zebra_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/zebra_obj/Zebra.mtl"></a-asset-item>
				<a-asset-item id="monkey_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/monkey/Monkey.obj"></a-asset-item>
				<a-asset-item id="monkey_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/monkey/Monkey.mtl"></a-asset-item>
				<a-asset-item id="umbrella_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/umbrella/NOVELO_OPENUMBRELLA.obj"></a-asset-item>
				<a-asset-item id="umbrella_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/umbrella/NOVELO_OPENUMBRELLA.mtl"></a-asset-item>
				<a-asset-item id="yolk_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/yolk/UncrackedEgg_239.obj"></a-asset-item>
				<a-asset-item id="yolk_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/yolk/UncrackedEgg_239.mtl"></a-asset-item>
				<a-asset-item id="qtip_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/qtip/CHAHIN_QTIP.obj"></a-asset-item>
				<a-asset-item id="qtip_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/qtip/CHAHIN_QTIP.mtl"></a-asset-item>
				<a-asset-item id="nest_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/nest/PUSHILIN_birds_nest.obj"></a-asset-item>
				<a-asset-item id="nest_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/nest/PUSHILIN_birds_nest.mtl"></a-asset-item>
				<a-asset-item id="octopus_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/octopus/model.obj"></a-asset-item>
				<a-asset-item id="octopus_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/octopus/materials.mtl"></a-asset-item>
				<a-asset-item id="headphone_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/headphone/1331%20HighEnd%20Headset.obj"></a-asset-item>
				<a-asset-item id="headphone_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/headphone/1331%20HighEnd%20Headset.mtl"></a-asset-item>
				<a-asset-item id="xmas_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/xmas/model.obj"></a-asset-item>
				<a-asset-item id="xmas_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/xmas/materials.mtl"></a-asset-item>
			
				<a-asset-item id="telescope_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/telescope/model.obj"></a-asset-item>
				<a-asset-item id="telescope_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/telescope/materials.mtl"></a-asset-item>
				
				<a-asset-item id="goat_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/goat/Mesh_Goat.obj"></a-asset-item>
				<a-asset-item id="goat_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/goat/Mesh_Goat.mtl"></a-asset-item>
				
				<a-asset-item id="vase_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/vase/Vase.obj"></a-asset-item>
				<a-asset-item id="vase_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/vase/Vase.mtl"></a-asset-item>
			
			</a-assets>

			<a-marker preset="custom" patterUrl="pattern-letterG.patt" url="pattern-letterG.patt" id="aframe-scene">
				<a-entity light="type: hemisphere; color: #fefddd; groundColor: #fefddd; intensity: 1.2"></a-entity>
			</a-marker>

			<a-entity camera></a-entity>

		</a-scene>
		<script>
			$(document).ready(init());

			function init() {
				var scaleFlag = 0,
					kyivFlag = false;
				var data = [{
						id: 1,
						title: 'A',
						description: 'Axe',
						assetId: 'axe_asset',						
						scale: '0.1 0.1 0.1',
						scaleOne: '0.3 0.3 0.3',
						scaleTwo: '0.5 0.5 0.5',
						isObj: false
					},
					{
						id: 2,
						title: 'B',
						description: 'Boat',
						assetId: 'boat_asset',
						scale: '4 4 4',
						scaleOne: '6 6 6',
						scaleTwo: '8 8 8',
						isObj: false
					},
					{
						id: 3,
						title: 'C',
						description: 'Cow',
						assetId: 'cow_asset',
						scale: '0.1 0.1 0.1',
						scaleOne: '0.15 0.15 0.15',
						scaleTwo: '0.17 0.17 0.17',
						isObj: false
					},
					{
						id: 4,
						title: 'D',
						description: 'Deer',
						assetId: 'deer_asset',
						scale: '0.8 0.8 0.8',
						scaleOne: '0.9 0.9 0.9',
						scaleTwo: '1.1 1.1 1.1',
						isObj: false
					},
					{
						id: 5,
						title: 'E',
						description: 'Earth',
						assetId: 'earth_asset',
						scale: '0.2 0.2 0.2',
						scaleOne: '0.4 0.4 0.4',
						scaleTwo: '0.6 0.6 0.6',
						isObj: false
					},
					{
						id: 6,
						title: 'F',
						description: 'Flower',
						assetId: 'flower_asset',
						scale: '0.09 0.09 0.09',
						scaleOne: '0.1 0.1 0.1',
						scaleTwo: '0.12 0.12 0.12',
						isObj: false
					},
					{
						id: 7,
						title: 'G',
						description: 'Goat',
						objAsset: 'goat_asset_obj',
						mtlAsset: 'goat_asset_mtl',	
						scale: '0.009 0.009 0.009',
						scaleOne: '0.014 0.014 0.014',
						scaleTwo: '0.016 0.016 0.016',
						isObj: true
					},
					{
						id: 8,
						title: 'H',
						description: 'Headphone',
						objAsset: 'headphone_asset_obj',
						mtlAsset: 'headphone_asset_mtl',	
						scale: '0.02 0.02 0.02',
						scaleOne: '0.04 0.04 0.04',
						scaleTwo: '0.06 0.06 0.06',
						isObj: true
					},
					{
						id: 9,
						title: 'I',
						description: 'Iphone',
						assetId: 'iphone_asset',
						scale: '0.6 0.6 0.6',
						scaleOne: '0.8 0.8 0.8',
						scaleTwo: '1 1 1',
						isObj: false
					},
					{
						id: 10,
						title: 'J',
						description: 'Jaguar',
						assetId: 'jaguar_asset',
						scale: '0.02 0.02 0.02',
						scaleOne: '0.03 0.03 0.03',
						scaleTwo: '0.04 0.04 0.04',
						isObj: false
					},
					{
						id: 11,
						title: 'K',
						description: 'Knife',
						assetId: 'knife_asset',
						scale: '0.09 0.09 0.09',
						scaleOne: '0.1 0.1 0.1',
						scaleTwo: '0.13 0.13 0.13',
						isObj: false
					},
					{
						id: 12,
						title: 'L',
						description: 'Lion',
						assetId: 'lion_asset',
						scale: '0.01 0.01 0.01',
						scaleOne: '0.012 0.012 0.012',
						scaleTwo: '0.013 0.013 0.013',
						isObj: false
					},
					{
						id: 13,
						title: 'M',
						description: 'Monkey',
						objAsset: 'monkey_asset_obj',
						mtlAsset: 'monkey_asset_mtl',
						scale: '0.5 0.5 0.5',
						scaleOne: '0.6 0.6 0.6',
						scaleTwo: '0.9 0.9 0.9',
						isObj: true
					},
					{
						id: 14,
						title: 'N',
						description: 'Nest',
						objAsset: 'nest_asset_obj',
						mtlAsset: 'nest_asset_mtl',
						scale: '0.5 0.5 0.5',
						scaleOne: '0.7 0.7 0.7',
						scaleOne: '0.9 0.9 0.9',
						isObj: true
					},
					{
						id: 15,
						title: 'O',
						description: 'Octopus',
						objAsset: 'octopus_asset_obj',
						mtlAsset: 'octopus_asset_mtl',
						scale: '1.9 1.9 1.9',
						scaleOne: '2 2 2',
						scaleTwo: '2.2 2.2 2.2',
						isObj: true

					},
					{
						id: 16,
						title: 'P',
						description: 'Pencil',
						assetId: 'pencil_asset',
						scale: '0.1 0.1 0.1',
						scaleOne: '0.2 0.2 0.2',
						scaleTwo: '0.3 0.3 0.3',
						isObj: false

					},
					{
						id: 17,
						title: 'Q',
						description: 'Qtip',
						objAsset: 'qtip_asset_obj',
						mtlAsset: 'qtip_asset_mtl',
						scale: '1.4 1.4 1.4',
						scaleOne: '1.9 1.9 1.9',
						scaleTwo: '2.3 2.3 2.3',
						isObj: true
					},
					{
						id: 18,
						title: 'R',
						description: 'Rat',
						assetId: 'rat_asset',
						scale: '0.5 0.5 0.5',
						scaleOne: '0.7 0.7 0.7',
						scaleTwo: '0.9 0.9 0.9',
						isObj: false

					},

					{
						id: 19,
						title: 'S',
						description: 'Scissor',
						assetId: 'scissor_asset',
						scale: '0.2 0.2 0.2',
						scaleOne: '0.4 0.4 0.4',
						scaleTwo: '0.6 0.6 0.6',
						isObj: false

					},
					{
						id: 20,
						title: 'T',
						description: 'Telescope',
						objAsset: 'telescope_asset_obj',
						mtlAsset: 'telescope_asset_mtl',
						scale: '1.8 1.8 1.8',
						scaleOne: '2 2 2',
						scaleTwo: '2.2 2.2 2.2',
						isObj: true
					},
					{
						id: 21,
						title: 'U',
						description: 'Umbrella',
						objAsset: 'umbrella_asset_obj',
						mtlAsset: 'umbrella_asset_mtl',
						scale: '0.010 0.010 0.010',
						scaleOne: '0.015 0.015 0.015',
						scaleTwo: '0.017 0.17 0.017',
						isObj: true

					},
					{
						id: 22,
						title: 'V',
						description: 'Van',
						assetId: 'van_asset',
						objAsset: 'vase_asset_obj',
						mtlAsset: 'vase_asset_mtl',
						scale: '6 6 6',
						scaleOne: '7 7 7 ',
						scaleTwo: '8 8 8',
						isObj: false

					},
					{
						id: 23,
						title: 'W',
						description: 'Whale',
						assetId: 'whale_asset',
						scale: '0.5 0.5 0.5',
						scaleOne: '0.7 0.7 0.7',
						scaleTwo: '1 1 1',
						isObj: false

					},

					{
						id: 24,
						title: 'X',
						description: 'Xmas',
						objAsset: 'xmas_asset_obj',
						mtlAsset: 'xmas_asset_mtl',
						scale: '2.0 2.0 2.0',
						scaleOne: '2.5 2.5 2.5',
						scaleTwo: '2.8 2.8 2.8',
						isObj: true
					},
					{
						id: 25,
						title: 'Y',
						description: 'Yolk',
						objAsset: 'yolk_asset_obj',
						mtlAsset: 'yolk_asset_mtl',
						scale: '0.03 0.03 0.03',
						scaleOne: '0.05 0.05 0.05',
						scaleTwo: '0.07 0.07 0.07',
						isObj: true

					},
					{
						id: 26,
						title: 'Z',
						description: 'Zebra',
						objAsset: 'zebra_asset_obj',
						mtlAsset: 'zebra_asset_mtl',
						scale: '0.1 0.1 0.1 ',
						scaleOne: '0.3 0.3 0.3',
						scaleTwo: '0.5 0.5 0.5',
						isObj: true

					}
				];
				var
					rotateBtn = $(".rotate"),
					scaleBtn = $(".scale"),
					switchBtn = $(".switch"),
					gotitBtn = $(".gotit");
				prevBtn = $(".prev");
				nextBtn = $(".next");

				var currentObject = '';
				var currentId = 0;
				var prev = 0;

				addObject(data, currentId, 1);

				gotitBtn.click(function () {
					gotitBtn.parent().css({
						display: "none"
					});
				});


				rotateBtn.click(function () {
					if (rotateBtn.hasClass("rotate_fade")) {
						currentObject.emit('endRotate');
						rotateBtn.removeClass("rotate_fade");
					} else {
						currentObject.emit('rotate');
						rotateBtn.addClass("rotate_fade");
					}
				});



				scaleBtn.click(function () {
					var scale, scaleOne, scaleTwo;
					scale = data[currentId].scale;
					scaleOne = data[currentId].scaleOne;
					scaleTwo = data[currentId].scaleTwo;
					if (scaleFlag == 0) {
						scaleFlag = 1;
						currentObject.setAttribute("scale", scale = scaleOne);
						//henModel.setAttribute("scale", scale = "0.09 0.09 0.09");
						scaleBtn.addClass("scale_one");
					} else if (scaleFlag == 1) {
						scaleFlag = 2;
						currentObject.setAttribute("scale", scale = scaleTwo);
						//			henModel.setAttribute("scale", scale = "0.1 0.1 0.1");
						scaleBtn.addClass("scale_two");
						scaleBtn.removeClass("scale_one");
					} else if (scaleFlag == 2) {
						scaleFlag = 0;
						currentObject.setAttribute("scale", scale = scale);
						//henModel.setAttribute("scale", scale = "0.05 0.05 0.05");
						scaleBtn.removeClass("scale_two");
					}
				});

				prevBtn.click(function () {
					scaleFlag = 0;
					scaleBtn.removeClass("scale_one");
					scaleBtn.removeClass("scale_two");
					rotateBtn.removeClass("rotate_fade");
					if (currentId !== 0) {
						currentId -= 1;
					} else {
						currentId = data.length - 1;
					}

					addObject(data, currentId, currentId + 1);
					hideObjects(data, currentId, currentId + 1);
					$('.title').html(data[currentId].description);
				});

				nextBtn.click(function () {
					scaleFlag = 0;
					scaleBtn.removeClass("scale_one");
					scaleBtn.removeClass("scale_two");
					rotateBtn.removeClass("rotate_fade");
					if (currentId !== data.length - 1) {
						currentId += 1;
					} else {
						currentId = 0;
					}
					addObject(data, currentId, currentId - 1);
					hideObjects(data, currentId, currentId - 1);
					$('.title').html(data[currentId].description);
				});

				function addObject(data, currentId, toRemoveId) {
					var currentData = data[currentId];
					if (document.querySelector('#obj_' + currentData.id)) {
						document.querySelector('#obj_' + currentData.id).setAttribute('visible', 'true');
						return;
					}

					var entity = document.createElement('a-entity');
					entity.setAttribute('id', 'obj_' + currentData.id);
					entity.setAttribute('rotation', '0 -90 0');
					entity.setAttribute('side', 'double');
					entity.setAttribute('position', '0.0 0.2 0');
					entity.setAttribute('scale', currentData.scale);
					currentObject = entity;
					if (currentData.isObj === true) {
						entity.setAttribute('obj-model', 'obj: #' + currentData.objAsset + '; mtl: #' + currentData.mtlAsset);
					} else {
						entity.setAttribute('gltf-model', '#' + currentData.assetId);
					}

					//Add animation
					var animation = document.createElement('a-animation');
					animation.setAttribute('attribute', 'rotation');
					animation.setAttribute('begin', 'rotate');
					animation.setAttribute('end', 'endRotate');
					animation.setAttribute('dur', '26000');
					animation.setAttribute('fill', 'forwards');
					animation.setAttribute('to', '0 270 0');
					animation.setAttribute('repeat', 'indefinite');
					animation.setAttribute('easing', 'linear');

					var marker = document.querySelector('#aframe-scene');
					entity.appendChild(animation);
					marker.appendChild(entity);

				}

				function hideObjects(data, currentId, toRemoveId) {
					if (document.querySelector('#obj_' + data.id)) {
						document.querySelector('#obj_' + data.id).setAttribute('visible', 'true');
						return;
					}
					data.forEach(element => {
						if (document.querySelector('#obj_' + element.id) !== null) {
							if (element.id === toRemoveId) {
								document.querySelector('#obj_' + element.id).setAttribute('visible', true);
							} else {

								document.querySelector('#obj_' + element.id).setAttribute('visible', false);
							}
						}
					});
				}
			}

		</script>
</body>

</html>
